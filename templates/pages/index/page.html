{% extends "base.html" %}

{% block scripts %}
<script>
	document.body.addEventListener('htmx:afterSwap', function(evt) {		
		if (evt.detail.target.id === 'number-list') {
					let list = document.getElementById('number-list');
					if (list.children.length > 10) {
							list.removeChild(list.children[list.children.length - 1]);
					}
			}
	});

	document.getElementById('number-list').addEventListener('htmx:afterSwap', function(event) {
    const newElement = event.detail.target.firstElementChild; // Target the new element added
    if (newElement) {
        newElement.classList.add('new-item');
        setTimeout(() => newElement.classList.remove('new-item'), 500); // Adjust timeout to match your CSS transition duration
    }
	});
</script>
{% endblock %}

{% block content %}
<div class="center-container">
<h1>Script number reservation</h1>
<button id="reserve-button" hx-post="/number" hx-target="#number-list" hx-swap="afterbegin">Make reservation</button>
<ul id="number-list" class="fade-list" hx-on="htmx:afterSwap:highlightNew">
	{% for code in codes %}
		{% include "code_item.html" %}
	{% endfor %}
</ul>
</div>
{% endblock %}